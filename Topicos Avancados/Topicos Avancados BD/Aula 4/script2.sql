DROP TABLE EDITORA CASCADE CONSTRAINTS;
DROP TABLE ASSUNTO CASCADE CONSTRAINTS;
DROP TABLE AUTOR CASCADE CONSTRAINTS;
DROP TABLE LIVRO CASCADE CONSTRAINTS;
DROP TABLE AUTOR_LIVRO CASCADE CONSTRAINTS;

CREATE TABLE EDITORA (
CODIGO NUMBER(5),
NOME VARCHAR2(20) CONSTRAINT EDITORA_NOME_NNU NOT NULL UNIQUE,
CONSTRAINT EDITORA_PK PRIMARY KEY(CODIGO));

CREATE TABLE ASSUNTO (
CODIGO NUMBER(5),
DESCRICAO VARCHAR2(20) CONSTRAINT ASSUNTO_DESCRICAO_NN NOT NULL,
CONSTRAINT ASSUNTO_PK PRIMARY KEY(CODIGO));

CREATE TABLE AUTOR (
MATRICULA NUMBER(5),
NOME VARCHAR2(30) CONSTRAINT AUTOR_NOME_NN NOT NULL,
CPF VARCHAR2(12) CONSTRAINT AUTOR_CPF_UN UNIQUE,
ENDERECO VARCHAR2(30),
CIDADE VARCHAR2(30) DEFAULT 'SÃO PAULO',
UF CHAR(2) DEFAULT 'SP' CONSTRAINT AUTOR_UF_CH CHECK (UF IN ('SP', 'RJ', 'MG', 'ES')),
CONSTRAINT AUTOR_PK PRIMARY KEY(MATRICULA));

CREATE TABLE LIVRO (
CODIGO NUMBER(5),
TITULO VARCHAR2(30) CONSTRAINT LIVRO_TITULO_NN NOT NULL,
PRECO NUMBER(7,2),
LANCAMENTO DATE DEFAULT SYSDATE,
CODIGO_EDITORA NUMBER(5) NOT NULL,
CODIGO_ASSUNTO NUMBER(5),
CONSTRAINT LIVRO_PK PRIMARY KEY(CODIGO),
CONSTRAINT LIVRO_EDITORA_FK FOREIGN KEY(CODIGO_EDITORA) REFERENCES EDITORA(CODIGO),
CONSTRAINT LIVRO_ASSUNTO_FK FOREIGN KEY(CODIGO_ASSUNTO) REFERENCES ASSUNTO(CODIGO));

CREATE TABLE AUTOR_LIVRO (
CODIGO_LIVRO NUMBER(5) NOT NULL,
MATRICULA_AUTOR NUMBER(5) NOT NULL,
CONSTRAINT AUTOR_LIVRO_PK PRIMARY KEY(CODIGO_LIVRO,MATRICULA_AUTOR),
CONSTRAINT AUTOR_LIVRO_LIVRO_FK FOREIGN KEY(CODIGO_LIVRO) REFERENCES LIVRO(CODIGO),
CONSTRAINT AUTOR_LIVRO_AUTOR_FK FOREIGN KEY(MATRICULA_AUTOR) REFERENCES AUTOR(MATRICULA));


INSERT INTO EDITORA VALUES (1,'EDITORA A');
INSERT INTO EDITORA VALUES (2,'EDITORA B');
INSERT INTO EDITORA VALUES (3,'EDITORA C');
INSERT INTO EDITORA VALUES (4,'EDITORA D');
INSERT INTO EDITORA VALUES (5,'EDITORA E');

INSERT INTO ASSUNTO VALUES (11,'ASSUNTO A');
INSERT INTO ASSUNTO VALUES (12,'ASSUNTO B');
INSERT INTO ASSUNTO VALUES (13,'ASSUNTO C');
INSERT INTO ASSUNTO VALUES (14,'ASSUNTO D');
INSERT INTO ASSUNTO VALUES (15,'ASSUNTO E');
INSERT INTO ASSUNTO VALUES (16,'ASSUNTO F');

INSERT INTO AUTOR VALUES (101,'AUTOR A','111222333-11','RUA A, 11','SÃO PAULO','SP');
INSERT INTO AUTOR VALUES (102,'AUTOR B','222333444-22','RUA B, 12','CAMPINAS','SP');
INSERT INTO AUTOR VALUES (103,'AUTOR C','333444555-33','RUA B, 13','RIO DE JANEIRO','RJ');
INSERT INTO AUTOR VALUES (104,'AUTOR D','444555666-44','RUA D, 14','NITERÓI','RJ');
INSERT INTO AUTOR VALUES (105,'AUTOR E','555666777-55','RUA E, 15','BELO HORIZONTE','MG');

INSERT INTO LIVRO VALUES (1001,'TITULO A',10.50,'01/01/2001',1,15);
INSERT INTO LIVRO VALUES (1002,'TITULO B',20.50,'01/01/2001',2,14);
INSERT INTO LIVRO VALUES (1003,'TITULO C',10.50,'01/01/2002',3,13);
INSERT INTO LIVRO VALUES (1004,'TITULO D',20.50,'01/01/2002',4,12);
INSERT INTO LIVRO VALUES (1005,'TITULO E',10.50,'01/01/2001',5,11);
INSERT INTO LIVRO VALUES (1006,'TITULO F',20.50,'01/01/2001',1,15);
INSERT INTO LIVRO VALUES (1007,'TITULO G',10.50,'01/01/2002',2,14);
INSERT INTO LIVRO VALUES (1008,'TITULO H',20.50,'01/01/2002',3,13);
INSERT INTO LIVRO VALUES (1009,'TITULO I',10.50,'01/01/2001',4,12);
INSERT INTO LIVRO VALUES (1010,'TITULO J',20.50,'01/01/2001',5,11);
INSERT INTO LIVRO VALUES (1011,'TITULO K',10.50,'01/01/2002',1,15);
INSERT INTO LIVRO VALUES (1012,'TITULO L',20.50,'01/01/2002',2,14);
INSERT INTO LIVRO VALUES (1013,'TITULO M',20.50,'01/01/2002',2,null);


INSERT INTO AUTOR_LIVRO VALUES (1001,101);
INSERT INTO AUTOR_LIVRO VALUES (1001,102);
INSERT INTO AUTOR_LIVRO VALUES (1002,101);
INSERT INTO AUTOR_LIVRO VALUES (1002,102);
INSERT INTO AUTOR_LIVRO VALUES (1003,103);
INSERT INTO AUTOR_LIVRO VALUES (1004,104);
INSERT INTO AUTOR_LIVRO VALUES (1005,101);
INSERT INTO AUTOR_LIVRO VALUES (1005,104);
INSERT INTO AUTOR_LIVRO VALUES (1006,101);
INSERT INTO AUTOR_LIVRO VALUES (1007,103);
INSERT INTO AUTOR_LIVRO VALUES (1008,102);
INSERT INTO AUTOR_LIVRO VALUES (1008,104);
INSERT INTO AUTOR_LIVRO VALUES (1009,104);
INSERT INTO AUTOR_LIVRO VALUES (1010,101);
INSERT INTO AUTOR_LIVRO VALUES (1010,105);
INSERT INTO AUTOR_LIVRO VALUES (1011,104);
INSERT INTO AUTOR_LIVRO VALUES (1012,105);